<!DOCTYPE html>
<html lang="pt-br" class="no-js">

<head>
    <meta charset="utf-8">
    <title>Toroide</title>
    <meta name="author" content="Lucas Felipe Turos">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <!--Prism.js - https://prismjs.com/ -->
    <link rel="stylesheet" type="text/css" href="css/prism.css">
</head>
<body class="main1"><br>
    <header>
        <template></template>
    </header>    
    <div class="container">
        <div class="row">
            <div class="col">
                <button type="button" class="btn btn-dark text-white" data-bs-toggle="collapse"
                    data-bs-target="#linux">Show/Hide
                    Code</button>
                <div id="linux" class="collapse">
                    <pre><code class="language-javascript">
                        const c = document.getElementById("torus");
                        const $ = c.getContext("2d");
                        const w = (c.width = 480);
                        const h = (c.height = 480);
                        const pi = 3.1415926535897932384626433832795028841971;
                        document.body.appendChild(c);

                        class Point {
                            constructor(x, y, z) {
                                this.x = x;
                                this.y = y;
                                this.z = z;
                            }
                            rotateX(amount) {
                                let y = this.y;
                                this.y = (y * Math.cos(amount)) + (this.z * Math.sin(amount) * -1.0);
                                this.z = (y * Math.sin(amount)) + (this.z * Math.cos(amount));
                            }
                            rotateY(amount) {
                                let x = this.x;
                                this.x = x * Math.cos(amount) + this.z * Math.sin(amount) * -1.0;
                                this.z = x * Math.sin(amount) + this.z * Math.cos(amount);
                            }
                            rotateZ(amount) {
                                let x = this.x;
                                this.x = (x * Math.cos(amount)) + (this.y * Math.sin(amount) * -1.0);
                                this.y = (x * Math.sin(amount)) + (this.y * Math.cos(amount));
                            }
                            getProjection(distance, xy, offSet, offSetZ) {
                                return (distance * xy) / (this.z - offSetZ) + offSet;
                            }
                            draw(x, y, size, color) {
                                $.save();
                                $.beginPath();
                                $.fillStyle = "rgb(255,255,255)";
                                $.arc(x, y, 1.5, 0, 2 * pi, true);
                                $.fill();
                                $.restore();
                            }
                        }

                        class Torus {
                            constructor(innerRadius = 5, outterRadius = 10, vertexQuantity = 20) {
                                this.point = [];
                                this.color = "rgb(255,255,255)";
                                this.innerRadius = innerRadius;
                                this.outterRadius = outterRadius;
                                this.numVertexes = 0;
                                this.vertexQuantity = vertexQuantity;
                                this.rotation = 0;
                                this.distance = 0;
                                this.init();
                            }
                            init() {
                                let increment = pi / this.vertexQuantity;
                                for (let alpha = increment; alpha <= 2 * pi; alpha += increment) {
                                    for (let beta = increment; beta <= 2 * pi; beta += increment) {
                                        let p = (this.point[this.numVertexes] = new Point());
                                        p.x = (this.outterRadius + this.innerRadius * Math.cos(beta)) * Math.cos(alpha);
                                        p.y = (this.outterRadius + this.innerRadius * Math.cos(beta)) * Math.sin(alpha);
                                        p.z = this.innerRadius * Math.sin(beta);
                                        this.numVertexes++;
                                    }
                                }
                            }
                            draw() {
                                let x, y;
                                let p = new Point();
                                for (let i = 0; i < this.numVertexes; i++) {
                                    p.x = this.point[i].x;
                                    p.y = this.point[i].y;
                                    p.z = this.point[i].z;
                                    p.rotateX(this.rotation);
                                    p.rotateY(this.rotation);
                                    p.rotateZ(this.rotation);
                                    x = p.getProjection(this.distance, p.x, w / 2.0, 100.0);
                                    y = p.getProjection(this.distance, p.y, h / 2.0, 100.0);
                                    p.draw(x, y);
                                }
                            }
                            update() {
                                this.rotation += pi / 360.0;
                                this.distance = 900;
                            }
                        }
                        const toroide = new Torus();
                        function draw() {
                            window.requestAnimationFrame(draw);
                            $.save();
                            $.clearRect(0, 0, w, h);
                            toroide.draw();
                            $.restore();
                            toroide.update();
                        }

                        document.getElementById("play").addEventListener("click", draw);
                    </code></pre>
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-center">
            <div class="row my-2" style="margin-top: 20px;">
                <div class="col">
                    <button class="btn btn-dark" id="play" style="margin-right: 10px;">Play</button>
                    <button class="btn btn-dark" onClick="window.location.reload();">Restart</button><br><br>
                    <h3 class="d-flex justify-content-center">Torus</h3>
                    <canvas id="torus">
                        <h2>Seu Navegador Não Suporta Canvas</h2>
                    </canvas>
                    <script type="text/javascript" src="js/torus.js"></script>
                </div>
            </div>
        </div>
    </div>
    <!-- Javascript da aplicação -->
    <script src="js/Menu.js"></script>
    <!-- Prism.js - https://prismjs.com/-->
    <script type="text/javascript" src="js/prism.js"></script>
    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js"
        integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.min.js"
        integrity="sha384-kjU+l4N0Yf4ZOJErLsIcvOU2qSb74wXpOhqTvwVx3OElZRweTnQ6d31fXEoRD1Jy"
        crossorigin="anonymous"></script>
    <!-- Ionic - Ionicons - https://ionic.io/ionicons-->
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>

</html>